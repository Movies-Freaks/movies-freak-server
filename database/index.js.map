{"version":3,"file":"index.js","sourceRoot":"","sources":["index.ts"],"names":[],"mappings":"AAAA,OAAO,IAAI,MAAM,MAAM,CAAC;AAExB,OAAO,QAAQ,MAAM,aAAa,CAAC;AACnC,OAAO,gBAAgB,MAAM,iBAAiB,CAAC;AAC/C,OAAO,WAAW,MAAM,cAAc,CAAC;AAEvC,OAAO,EAAE,cAAc,EAAE,MAAM,mBAAmB,CAAC;AAEnD,MAAM,OAAO,yBAA0B,SAAQ,KAAK;CAAG;AAEvD,SAAS,WAAW,CAAC,UAA0B,EAAE,WAAwB;IACvE,IAAI,UAAU,KAAK,cAAc,CAAC,GAAG,EAAE,CAAC;QACtC,MAAM,MAAM,GAAG,QAAQ,CAAC,WAAW,CAAC,CAAC;QACrC,MAAM,UAAU,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC;QAEhC,OAAO,IAAI,WAAW,CAAC,UAAU,CAAC,CAAC;IACrC,CAAC;IAED,IAAI,UAAU,KAAK,cAAc,CAAC,MAAM,EAAE,CAAC;QACzC,OAAO,IAAI,gBAAgB,EAAE,CAAC;IAChC,CAAC;IAED,MAAM,IAAI,yBAAyB,CAAC,UAAU,CAAC,CAAC;AAClD,CAAC;AAED,eAAe,WAAW,CAAC","sourcesContent":["import knex from 'knex';\n\nimport knexfile from '../knexfile';\nimport InMemoryDatabase from './stores/memory';\nimport SQLDatabase from './stores/sql';\nimport { Environment } from '../types/common';\nimport { DatabaseDriver } from '../types/database';\n\nexport class UnsupportedDatabaseDriver extends Error {}\n\nfunction getDatabase(driverName: DatabaseDriver, environment: Environment) {\n  if (driverName === DatabaseDriver.SQL) {\n    const config = knexfile[environment];\n    const connection = knex(config);\n\n    return new SQLDatabase(connection);\n  }\n\n  if (driverName === DatabaseDriver.MEMORY) {\n    return new InMemoryDatabase();\n  }\n\n  throw new UnsupportedDatabaseDriver(driverName);\n}\n\nexport default getDatabase;\n"]}